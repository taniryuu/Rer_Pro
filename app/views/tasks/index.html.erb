  <% provide(:class_text, 'task--new') %>
  <% provide(:button_text, '作成') %>
    <h1>タスク一覧 </h1>
    <h3>To Do リスト</h3>
    <table>
      <tbody>
        <%= form_with(model: @tasks, url: tasks_update_add_delete_list_step_path(@step), local: true, mothod: :post) do |f| %>
          <% @tasks.each do |task| %>
            <tr>
              <td><%= f.check_box(:delete_task, { multiple: true, class: "check_box"}, checked_value = "true", unchecked_value = "false") %></td>
              <td><%= link_to "#{task.name}", task_path(task) %></td>
              <td><%= task.scheduled_complete_date %></td>
              <td><%= link_to '中止', add_canceled_list_task_path(task), data: { confirm: "「#{task.name}」を中止リストに移動してよろしいですか？" } %></td>
              <td><%= link_to '削除', task_path(task), method: :delete, data: { confirm: "「#{task.name}」を削除してよろしいですか？" } %></td>
            </tr>
          <% end %>
          <tr>
            <td>
            <%= f.submit "更新" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
 
    <!-- 入力フォーム -->

    <%= form_with(model: @task, url: step_tasks_path(step_id: @step), method: :post, local: true) do |f| %>
  
      <%= render 'devise/shared/error_messages', resource: @task %>

      <div class="row">
        <div class="col-2">
          <div class="form-group">            
            <%= f.label :name, class: "label-#{yield(:class_text)}"%>
            <%= f.text_field :name, class: "form-control" %>          
          </div>
        </div>
        <div class="col-2">
          <div class="form-group">  
            <%= f.label :scheduled_complete_date, class: "label-#{yield(:class_text)}" %>
            <%= f.datetime_local_field :scheduled_complete_date, class: 'form-control' %>
          </div>  
        </div> 

        <div class="col-2 align-self-end">
          <div class="form-group">        
            <%= f.submit yield(:button_text), class: "btn-#{yield(:class_text)}" %>
          </div>
        </div>

        <%= f.hidden_field :step_id, class: "form-control", value: @step.id %> 
      
      </div>
    
    <% end %>

    <h3>済 リスト</h3>
    <table>
      <tbody>
        <% @completed_tasks_array.each do |task| %>
          <tr>
            <td><%= link_to "#{task.name}", task_path(task) %></td>
            <td><%= task.completed_date %></td>
            <td><%= link_to '削除', task_path(task), method: :delete, data: { confirm: "「#{task.name}」を削除してよろしいですか？" } %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <h3>中止 リスト</h3>
    <table>
      <tbody>
        <% @canceled_tasks_array.each do |task| %>
          <tr>
            <td><%= link_to "#{task.name}", task_path(task) %></td>
            <td><%= task.canceled_date %></td>
            <td><%= link_to '復活', edit_revive_from_canceled_list_task_path(task), data: { confirm: "「#{task.name}」を復活してよろしいですか？"} %>
            <td><%= link_to '削除', task_path(task), method: :delete, data: { confirm: "「#{task.name}」を削除してよろしいですか？" } %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <!--モーダルウインドウ表示-->
    <div id="edit-revive-from-canceled-list" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
